{"version":3,"sources":["webpack:///./src/app/books/book-details/book-details.component.html","webpack:///./src/app/books/book-list-item/book-list-item.component.html","webpack:///./src/app/books/book-list/book-list.component.html","webpack:///./src/app/books/book-details/book-details.component.css","webpack:///./src/app/books/book-details/book-details.component.ts","webpack:///./src/app/books/book-list-item/book-list-item.component.css","webpack:///./src/app/books/book-list-item/book-list-item.component.ts","webpack:///./src/app/books/book-list/book-list.component.css","webpack:///./src/app/books/book-list/book-list.component.ts","webpack:///./src/app/books/books-routing.module.ts","webpack:///./src/app/books/books.module.ts","webpack:///./src/app/books/effects/book.effects.ts","webpack:///./src/app/books/reducers/book.reducer.ts","webpack:///./src/app/books/shared/delay.directive.ts","webpack:///./src/app/books/shared/isbn.pipe.ts","webpack:///./src/app/books/shared/zoom.directive.ts"],"names":[],"mappings":"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","file":"books-books-module-es5.js","sourcesContent":["module.exports = \"<div *ngIf=\\\"book$ | async as book; else loading\\\">\\n  <h1>{{ book.title }}</h1>\\n  <h3 *ngIf=\\\"book.subtitle\\\">{{ book.subtitle }}</h3>\\n  <div class=\\\"ui divider\\\"></div>\\n  <div class=\\\"ui grid\\\">\\n    <div class=\\\"four wide column\\\">\\n      <h4 i18n=\\\"@@BookDetailsComponent:book authors\\\">\\n        Autoren\\n      </h4>\\n      <ng-container *ngFor=\\\"let author of book.authors\\\">\\n        {{ author }}<br>\\n      </ng-container>\\n    </div>\\n    <div class=\\\"four wide column\\\">\\n      <h4 i18n=\\\"@@BookDetailsComponent:book isbn\\\">\\n        ISBN\\n      </h4>\\n      {{ book.isbn | isbn }}\\n    </div>\\n    <div class=\\\"four wide column\\\">\\n      <h4 i18n=\\\"@@BookDetailsComponent:book published date\\\">\\n        Erschienen\\n      </h4>\\n      {{ book.published | date:'longDate' }}\\n    </div>\\n    <div class=\\\"four wide column\\\">\\n      <h4 i18n=\\\"@@BookDetailsComponent:book rating\\\">\\n        Rating\\n      </h4>\\n      <ng-container\\n        *ngFor=\\\"let r of getRating(book.rating);\\n                index as i\\\">\\n        <i class=\\\"yellow star icon\\\"\\n          *bmDelay=\\\"500 + i * 200\\\"></i>\\n      </ng-container>\\n    </div>\\n  </div>\\n  <h4 i18n=\\\"@@BookDetailsComponent:book description\\\">\\n    Beschreibung\\n  </h4>\\n  <p>{{ book.description }}</p>\\n  <div class=\\\"ui small images\\\">\\n    <img *ngFor=\\\"let thumbnail of book.thumbnails\\\"\\n      [src]=\\\"thumbnail.url\\\">\\n  </div>\\n  <button class=\\\"ui tiny red labeled icon button\\\"\\n          (click)=\\\"removeBook()\\\">\\n    <i class=\\\"remove icon\\\"></i>\\n    <ng-container i18n=\\\"@@BookDetailsComponent:book delete\\\">\\n      Buch löschen\\n    </ng-container>\\n  </button>\\n  <a class=\\\"ui tiny yellow labeled icon button\\\"\\n    [routerLink]=\\\"['../../admin/edit', book.isbn]\\\">\\n    <i class=\\\"write icon\\\"></i>\\n    <ng-container i18n=\\\"@@BookDetailsComponent:book edit\\\">\\n      Buch bearbeiten\\n    </ng-container>\\n  </a>\\n</div>\\n\\n<ng-template #loading>\\n  <div class=\\\"ui active centered inline loader\\\"></div>\\n</ng-template>\\n\"","module.exports = \"<img class=\\\"ui tiny image\\\"\\n     *ngIf=\\\"book.thumbnails && book.thumbnails[0] && book.thumbnails[0].url\\\"\\n     [src]=\\\"book.thumbnails[0].url\\\"\\n     bmZoom>\\n<div class=\\\"content\\\">\\n  <div class=\\\"header\\\">{{ book.title }}</div>\\n  <div *ngIf=\\\"book.subtitle\\\" class=\\\"description\\\">{{ book.subtitle }}</div>\\n  <div class=\\\"metadata\\\">\\n    <span *ngFor=\\\"let author of book.authors; last as l\\\">\\n      {{ author }}<span *ngIf=\\\"!l\\\">, </span>\\n    </span>\\n    <br>\\n    ISBN {{ book.isbn | isbn }}\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"ui middle aligned selection divided list\\\">\\n\\n  <ng-container *ngIf=\\\"books$ | async as books\\\">\\n    <bm-book-list-item class=\\\"item\\\"\\n      *ngFor=\\\"let b of books\\\"\\n      [book]=\\\"b\\\"\\n      [routerLink]=\\\"b.isbn\\\"></bm-book-list-item>\\n\\n    <p *ngIf=\\\"!books.length\\\"\\n      i18n=\\\"@@BookListComponent:no book\\\">\\n      Es wurden noch keine Bücher eingetragen.\\n    </p>\\n  </ng-container>\\n\\n  <ng-container *ngIf=\\\"loading$ | async\\\">\\n    <div class=\\\"ui active dimmer\\\">\\n      <div class=\\\"ui large text loader\\\"\\n        i18n=\\\"@@BookListComponent:loading data\\\">\\n        Daten werden geladen...\\n      </div>\\n    </div>\\n  </ng-container>\\n\\n</div>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Jvb2tzL2Jvb2stZGV0YWlscy9ib29rLWRldGFpbHMuY29tcG9uZW50LmNzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport { Observable } from 'rxjs';\n\nimport { State } from '../../reducers';\nimport { LoadBook, DeleteBook } from '../actions/book.actions';\nimport { getBookByIsbn } from '../selectors/book.selectors';\nimport { Book } from '../../shared/book';\nimport { BookStoreService } from '../../shared/book-store.service';\n\n@Component({\n  selector: 'bm-book-details',\n  templateUrl: './book-details.component.html',\n  styleUrls: ['./book-details.component.css']\n})\nexport class BookDetailsComponent implements OnInit {\n  book$: Observable<Book>;\n\n  constructor(\n    private bs: BookStoreService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private store: Store<State>\n  ) { }\n\n  ngOnInit() {\n    const isbn = this.getIsbn();\n\n    this.book$ = this.store.pipe(\n      select(getBookByIsbn, { isbn })\n    );\n\n    this.store.dispatch(new LoadBook({ isbn }));\n  }\n\n  getRating(num: number) {\n    return new Array(num);\n  }\n\n  removeBook() {\n    if (confirm('Buch wirklich löschen?')) {\n      const isbn = this.getIsbn();\n      this.store.dispatch(new DeleteBook({ isbn }));\n    }\n  }\n\n  getIsbn() {\n    return this.route.snapshot.paramMap.get('isbn');\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Jvb2tzL2Jvb2stbGlzdC1pdGVtL2Jvb2stbGlzdC1pdGVtLmNvbXBvbmVudC5jc3MifQ== */\"","import { Component, OnInit, Input } from '@angular/core';\n\nimport { Book } from '../../shared/book';\n\n@Component({\n  selector: 'bm-book-list-item',\n  templateUrl: './book-list-item.component.html',\n  styleUrls: ['./book-list-item.component.css']\n})\nexport class BookListItemComponent implements OnInit {\n  @Input() book: Book;\n\n  ngOnInit() {\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Jvb2tzL2Jvb2stbGlzdC9ib29rLWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Store, select } from '@ngrx/store';\n\nimport { State } from '../../reducers'; // Root State!\nimport { LoadBooks } from '../actions/book.actions';\nimport { getAllBooks, getBooksLoading } from '../selectors/book.selectors';\nimport { Book } from '../../shared/book';\n\n@Component({\n  selector: 'bm-book-list',\n  templateUrl: './book-list.component.html',\n  styleUrls: ['./book-list.component.css']\n})\nexport class BookListComponent implements OnInit {\n  books$: Observable<Book[]>;\n  loading$: Observable<boolean>;\n\n  constructor(private store: Store<State>) { }\n\n  ngOnInit() {\n    this.books$ = this.store.pipe(select(getAllBooks));\n    this.loading$ = this.store.pipe(select(getBooksLoading));\n\n    this.store.dispatch(new LoadBooks());\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BookListComponent } from './book-list/book-list.component';\nimport { BookDetailsComponent } from './book-details/book-details.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BookListComponent\n  },\n  {\n    path: ':isbn',\n    component: BookDetailsComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  providers: []\n})\nexport class BooksRoutingModule { }\n","import { DelayDirective } from './shared/delay.directive';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BooksRoutingModule } from './books-routing.module';\n\nimport { BookListComponent } from './book-list/book-list.component';\nimport { BookListItemComponent } from './book-list-item/book-list-item.component';\nimport { BookDetailsComponent } from './book-details/book-details.component';\nimport { IsbnPipe } from './shared/isbn.pipe';\nimport { ZoomDirective } from './shared/zoom.directive';\nimport { StoreModule } from '@ngrx/store';\nimport * as fromBook from './reducers/book.reducer';\nimport { EffectsModule } from '@ngrx/effects';\nimport { BookEffects } from './effects/book.effects';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    BooksRoutingModule,\n    StoreModule.forFeature('book', fromBook.reducer),\n    EffectsModule.forFeature([BookEffects])\n  ],\n  declarations: [\n    BookListComponent,\n    BookListItemComponent,\n    BookDetailsComponent,\n    IsbnPipe,\n    ZoomDirective,\n    DelayDirective\n  ]\n})\nexport class BooksModule { }\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { switchMap, map, catchError, mergeMap, tap } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\nimport {\n  BookActionTypes,\n  BookActions,\n  LoadBooksSuccess,\n  LoadBooksFailure,\n  LoadBookSuccess,\n  LoadBookFailure,\n  DeleteBook,\n  DeleteBookSuccess\n} from '../actions/book.actions';\nimport { BookStoreService } from 'src/app/shared/book-store.service';\n\n@Injectable()\nexport class BookEffects {\n\n  @Effect()\n  loadBooks$ = this.actions$.pipe(\n    ofType(BookActionTypes.LoadBooks),\n    switchMap(() =>\n      this.bs.getAll().pipe(\n        map(books => new LoadBooksSuccess({ books })),\n        catchError(error => of(new LoadBooksFailure({ error }))))\n    )\n  );\n\n  @Effect()\n  loadBook$ = this.actions$.pipe(\n    ofType(BookActionTypes.LoadBook),\n    map(action => action.payload.isbn),\n    mergeMap(isbn => this.bs.getSingle(isbn).pipe(\n      map(book => new LoadBookSuccess({ book })),\n      catchError(error => of(new LoadBookFailure({ error })))\n    ))\n  );\n\n  @Effect()\n  deleteBook$ = this.actions$.pipe(\n    ofType<DeleteBook>(BookActionTypes.DeleteBook),\n    map(action => action.payload.isbn),\n    mergeMap(isbn => this.bs.remove(isbn).pipe(\n      map(() => new DeleteBookSuccess({ isbn }))\n    ))\n  );\n\n  @Effect({ dispatch: false })\n  deleteBookSuccess$ = this.actions$.pipe(\n    ofType(BookActionTypes.DeleteBookSuccess),\n    tap(() => this.router.navigate(['/books']))\n  );\n\n  constructor(\n    private actions$: Actions<BookActions>,\n    private bs: BookStoreService,\n    private router: Router\n  ) {}\n\n}\n","import { BookActions, BookActionTypes } from '../actions/book.actions';\n\nimport { Book } from '../../shared/book';\nimport { AdminActionTypes, AdminActions } from '../../admin/actions/admin.actions';\n\nexport interface State {\n  books: Book[];\n  loading: boolean;\n}\n\nexport const initialState: State = {\n  books: [],\n  loading: false\n};\n\nexport function reducer(state = initialState, action: BookActions | AdminActions): State {\n  switch (action.type) {\n\n    case BookActionTypes.LoadBooks: {\n      return {\n        ...state,\n        loading: true\n      };\n    }\n\n    case BookActionTypes.LoadBooksSuccess: {\n      return {\n        ...state,\n        books: action.payload.books,\n        loading: false\n      };\n    }\n\n    case BookActionTypes.LoadBookSuccess: {\n      const { book } = action.payload;\n\n      const books = [\n        ...state.books.filter(b => b.isbn !== book.isbn),\n        book\n      ];\n\n      return {\n        ...state,\n        books\n      };\n    }\n\n    case BookActionTypes.DeleteBookSuccess: {\n      return {\n        ...state,\n        books: state.books.filter(\n          b => b.isbn !== action.payload.isbn\n        )\n      };\n    }\n\n    case AdminActionTypes.CreateBookSuccess: {\n      const { book } = action.payload;\n      const books = [...state.books, book];\n\n      return { ...state, books };\n    }\n\n    case AdminActionTypes.UpdateBookSuccess: {\n      const { book } = action.payload;\n      const books = state.books.map(b => b.isbn === book.isbn ? book : b);\n\n      return { ...state, books };\n    }\n\n    default:\n      return state;\n  }\n}\n","import { Directive, OnInit, Input, TemplateRef, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[bmDelay]'\n})\nexport class DelayDirective implements OnInit {\n  @Input() bmDelay;\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainerRef: ViewContainerRef\n  ) { }\n\n  ngOnInit() {\n    setTimeout(() => {\n      this.viewContainerRef.createEmbeddedView(this.templateRef);\n    }, this.bmDelay);\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'isbn'\n})\nexport class IsbnPipe implements PipeTransform {\n\n  transform(value: string): string {\n    if (!value) { return null; }\n    return `${value.substr(0, 3)}-${value.substr(3)}`;\n  }\n}\n","import { Directive, HostBinding, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[bmZoom]'\n})\nexport class ZoomDirective {\n  @HostBinding('class.small') isZoomed: boolean;\n\n  @HostListener('mouseenter') onMouseEnter() {\n    this.isZoomed = true;\n  }\n  @HostListener('mouseleave') onMouseLeave() {\n    this.isZoomed = false;\n  }\n}\n"],"sourceRoot":""}